<Page
    x:Class="VESTIGENEWS.ArticleList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:hydrant="using:HYDRANT"
    xmlns:vestigeNews="using:VESTIGENEWS"
    Background="#080808">

  <Page.Resources>
    <DataTemplate x:Key="NoImageTemplate" x:DataType="hydrant:Article">
      <Grid MinWidth="400" HorizontalAlignment="Stretch" Padding="10,0"
            PointerPressed="InvokeArticle" CornerRadius="4" Margin="10,0">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Border BorderBrush="#555555" Opacity="0.2" HorizontalAlignment="Stretch" BorderThickness="1" Margin="10"/>
        <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,5">
          <Border Width="16" Height="16" CornerRadius="5" Background="Gray" Margin="0,0,5,0">
            <Image Source="{x:Bind PublisherIcon}"/>
          </Border>
          <TextBlock Text="{x:Bind Publisher}" FontSize="10"/>
          <TextBlock Text="·" FontSize="10" Margin="5,0"/>
          <TextBlock Text="{x:Bind TimeFromPublication}" FontSize="10"/>
          <TextBlock Text="NI" HorizontalAlignment="Right" FontSize="10"/>
        </StackPanel>
        <TextBlock Grid.Row="3" Text="{x:Bind Title}" FontSize="16"  TextWrapping="Wrap"/>
        <TextBlock Grid.Row="4" Text="{x:Bind RssSummary}" MaxLines="3" FontSize="11" TextWrapping="Wrap"/>
      </Grid>
    </DataTemplate>
    <DataTemplate x:Key="HeadlineTemplate" x:DataType="hydrant:Article">
      <Grid MinWidth="400" HorizontalAlignment="Stretch" Padding="10,0"
            PointerPressed="InvokeArticle" CornerRadius="4" Margin="10,0">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Border BorderBrush="#555555" Opacity="0.2" HorizontalAlignment="Stretch" BorderThickness="1" Margin="10"/>
        <StackPanel Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,5">
          <Border Width="16" Height="16" CornerRadius="5" Background="Gray" Margin="0,0,5,0">
            <Image Source="{x:Bind PublisherIcon}"/>
          </Border>
          <TextBlock Text="{x:Bind Publisher}" FontSize="10"/>
          <TextBlock Text="·" FontSize="10" Margin="5,0"/>
          <TextBlock Text="{x:Bind TimeFromPublication}" FontSize="10"/>
          <TextBlock Text="H" HorizontalAlignment="Right" FontSize="10"/>
        </StackPanel>
        <Border CornerRadius="4" Grid.Row="2">
          <Image Source="{x:Bind ImageURL}" Stretch="Fill" Height="400" />
        </Border>
        <TextBlock Grid.Row="3" Text="{x:Bind Title}" FontSize="16"  TextWrapping="Wrap"/>
        <TextBlock Grid.Row="4" Text="{x:Bind RssSummary}" MaxLines="3" FontSize="11" TextWrapping="Wrap"/>
      </Grid>
    </DataTemplate>
    <DataTemplate x:Key="MinimalTemplate" x:DataType="hydrant:Article">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Separating boarder -->
        <Border Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" BorderBrush="#555555" Opacity="0.2"
                HorizontalAlignment="Stretch" BorderThickness="1" Margin="10"/>

        <!-- Publication Information -->
        <StackPanel Grid.Column="0" Grid.Row="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,5">
          <Border Width="16" Height="16" CornerRadius="5" Background="Gray" Margin="0,0,5,0">
            <Image Source="{x:Bind PublisherIcon}"/>
          </Border>
          <TextBlock Text="{x:Bind Publisher}" FontSize="10"/>
          <TextBlock Text="·" FontSize="10" Margin="5,0"/>
          <TextBlock Text="{x:Bind TimeFromPublication}" FontSize="10"/>
          <TextBlock Text="M" HorizontalAlignment="Right" FontSize="10"/>
        </StackPanel>

        <!-- Title - [Image] -->
        <TextBlock Grid.Column="0" Grid.Row="2" Text="{x:Bind Title}" FontSize="16" TextWrapping="Wrap"/>
        <Border Grid.Column="1" Grid.Row="2" CornerRadius="4" HorizontalAlignment="Right" Width="100" Height="100" >
          <Image Source="{x:Bind ImageURL}"/>
        </Border>
      </Grid>
    </DataTemplate>

    <vestigeNews:ArticleSelector x:Key="ArticleSelector"
                                 NoImageTemplate="{StaticResource NoImageTemplate}"
                                 MinimalTemplate="{StaticResource MinimalTemplate}"
                                 HeadlineTemplate="{StaticResource HeadlineTemplate}"/>
  </Page.Resources>


  <Page.TopAppBar>
    <CommandBar OverflowButtonVisibility="Collapsed">
      <CommandBar.PrimaryCommands>
        <AppBarButton Content="VESTIGE NEWS APP TEST" FontSize="20"/>
      </CommandBar.PrimaryCommands>
    </CommandBar>
  </Page.TopAppBar>
  <Page.BottomAppBar>
    <CommandBar OverflowButtonVisibility="Collapsed" HorizontalAlignment="Stretch" HorizontalContentAlignment="Center">
      <CommandBar.PrimaryCommands>
        <AppBarButton Icon="Setting" Label="Settings" IsCompact="False" HorizontalAlignment="Center"/>
        <AppBarButton Label="News" IsCompact="False"  HorizontalAlignment="Center">
          <AppBarButton.Icon> 
            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE789;"/>
          </AppBarButton.Icon>
        </AppBarButton>
        <AppBarButton Label="Bookmarks" IsCompact="False"  HorizontalAlignment="Center">
          <AppBarButton.Icon>
            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE734;"/>
          </AppBarButton.Icon>
        </AppBarButton>
      </CommandBar.PrimaryCommands>
    </CommandBar>
  </Page.BottomAppBar>

  <ScrollViewer Width="600" >
    <StackPanel Orientation="Vertical" >
      <ItemsControl ItemsSource="{x:Bind Articles}" ItemTemplateSelector="{StaticResource ArticleSelector}"/>
    </StackPanel>
  </ScrollViewer>
</Page>
